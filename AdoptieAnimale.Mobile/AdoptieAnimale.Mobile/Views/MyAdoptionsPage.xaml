<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="AdoptieAnimale.Mobile.Views.MyAdoptionsPage"
             Title="Cererile Mele de AdopÈ›ie">

    <Grid RowDefinitions="Auto,*" Padding="10">

        <!-- Header -->
        <HorizontalStackLayout Grid.Row="0" Spacing="10" Margin="0,0,0,10">
            <Button Text="Refresh" Clicked="OnRefreshClicked"/>
            <Label Text="Cererile tale de adopÈ›ie" 
                   FontSize="18" 
                   FontAttributes="Bold"
                   VerticalOptions="Center"/>
        </HorizontalStackLayout>

        <!-- Lista de cereri -->
        <CollectionView Grid.Row="1" x:Name="AdoptionsCollection">
            <CollectionView.EmptyView>
                <ContentView>
                    <VerticalStackLayout VerticalOptions="Center" Spacing="10">
                        <Label Text="ðŸ“‹" FontSize="60" HorizontalOptions="Center"/>
                        <Label Text="Nu ai cereri de adopÈ›ie Ã®ncÄƒ." 
                               FontSize="16" 
                               TextColor="Gray"
                               HorizontalOptions="Center"/>
                    </VerticalStackLayout>
                </ContentView>
            </CollectionView.EmptyView>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="5" Padding="15" BorderColor="LightGray" CornerRadius="10">
                        <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto,Auto,Auto">

                            <!-- Animal Name -->
                            <Label Grid.Column="0" Grid.Row="0" 
                                   Text="{Binding Animal.Name, StringFormat='Animal: {0}'}" 
                                   FontSize="18" 
                                   FontAttributes="Bold"/>

                            <!-- Status Badge -->
                            <Frame Grid.Column="1" Grid.Row="0" 
                                   Padding="8,4" 
                                   CornerRadius="5"
                                   BackgroundColor="{Binding Status, Converter={StaticResource StatusColorConverter}}"
                                   HasShadow="False">
                                <Label Text="{Binding Status}" 
                                       FontSize="12" 
                                       TextColor="White"
                                       FontAttributes="Bold"/>
                            </Frame>

                            <!-- Details -->
                            <Label Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" 
                                   Text="{Binding RequestDate, StringFormat='Data: {0:dd/MM/yyyy}'}" 
                                   FontSize="14" 
                                   TextColor="Gray"/>

                            <Label Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="2" 
                                   Text="{Binding ApplicantName, StringFormat='Solicitant: {0}'}" 
                                   FontSize="14"/>

                            <Label Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="3" 
                                   Text="{Binding Reason}" 
                                   FontSize="12" 
                                   TextColor="Gray"
                                   LineBreakMode="TailTruncation"
                                   MaxLines="2"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Loading Indicator -->
        <ActivityIndicator Grid.Row="1" 
                          x:Name="LoadingIndicator" 
                          IsRunning="False" 
                          IsVisible="False" 
                          Color="Blue" 
                          VerticalOptions="Center"/>
    </Grid>
</ContentPage>